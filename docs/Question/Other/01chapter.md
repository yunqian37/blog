# 大致框架

+ 浏览器构建HTTP Request请求
+ 网络传输
+ 服务器构建HTTP Response响应
+ 网络传输
+ 浏览器渲染页面

# 解析URL

**url的组成：** 协议、主机、端口、路径、查询参数、锚点

每次网络请求时都需要开辟单独的线程进行，如果URL解析到http协议就会新建一个网络线程去处理资源下载

# 构建请求

**应用层进行DNS解析：**

通过DNS将域名解析成IP地址。在解析过程中按照浏览器缓存、系统缓存、路由器缓存、ISP(运营商)DNS缓存、根域名服务器、顶级域名服务器、主域名服务器的顺序，逐步读取缓存，直到拿到IP地址

**应用层生辰HTTP请求报文** 

**传输层建立TCP链接**

**网络层使用IP协议来选择路线**

**数据链路层实现网络相邻节点间可靠的数据通信**

**物理层传输数据**

总结：DNS解析URL地址，生成HTTP请求报文、构建TCP连接、使用IP协议选择传输路线、数据链路层保证数据的可靠传输、物理层将数据转为电子 光学或微波信号进行传输

# 页面渲染

**<a href='https://blog.csdn.net/qq_20901397/article/details/79982679'>浏览器内核拿到内容后的大致渲染步骤：</a>**

+ 解析HTML构建DOM树
+ 解析CSS生成CSS规则树
+ 合并DOM树和CSS规则树，生成render树（渲染树）
+ 布局render树，负责各元素尺寸、位置的计算
+ 绘制render树，绘制页面像素信息
+ 浏览器将各层的信息发送给GUI，GUI将各层合成显示在屏幕上

**<a href='https://juejin.cn/post/6935232082482298911#heading-33'>重绘与回流</a>**

**重绘：** 当前页面中元素样式的改变并不影响他在文档六种的位置时浏览器会将新样式赋予给元素并重新绘制它

**回流：** 当Render Tree中部分或全部元素的尺寸、结构、或某些属性发生改变时，浏览器重新渲染部分或全部文档的过程

<span style="color:red">回流必将引起重绘，重绘不一定会引起回流</span>

**引起回流的操作：**

+ 页面首次渲染
+ 浏览器窗口大小发生改变
+ 元素尺寸或位置发生改变
+ 元素内容的变化（文字数量或图片大小等）
+ 元素字体大小变化
+ 添加或者删除可见的DOM元素
+ 激活CSS伪类
+ 查询某些属性火调用某些方法

**如何减少回流：**

CSS：

+ 避免使用table布局
+ 尽可能在DOM树的最末端改变class
+ 避免设置多层内连样式
+ 将动画效果应用到position属性为absoulte或fixed的元素上
+ 避免使用CSS表达式

JS：

+ 避免频繁操作样式
+ 避免频繁操作DOM
+ 可以先为元素设置diaplay:none，操作结束之后再把它显示出来。在该属性的元素上进行DOM操作不会引发重绘和回流
+ 避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用就用一个变量缓存起来
+ 对具有复杂动画的元素使用绝对定位，使其脱离文档流。否则会引起父元素及后续元素频繁回流

### 参考链接

<a href='https://juejin.cn/post/6935232082482298911'>掘金-从输入URL开始建立前端知识体系</a>

<a href='https://www.cnblogs.com/xiaohuochai/p/9193083.html'>博客园-小火柴</a>

